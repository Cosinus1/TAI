<div class="upload-container">
  <h1>Importer vos donn√©es GPS</h1>
  
  <!-- Section 1: S√©lection du fichier -->
  <section class="upload-section">
    <h2>1. S√©lectionner votre fichier</h2>
    <div class="file-input-wrapper">
      <input 
        type="file" 
        #fileInput 
        accept=".txt,.csv,.gpx"
        class="file-input"
      >
      <label class="file-label">
        <span class="upload-icon">üìÅ</span>
        <span class="upload-text">Cliquez ou d√©posez votre fichier</span>
      </label>
    </div>
    <p class="file-info">
      ‚úÖ Fichier s√©lectionn√©
    </p>
  </section>

  <!-- Section 2: Format des donn√©es -->
  <section class="upload-section">
    <h2>2. D√©finir le format de vos donn√©es</h2>
    
    <div class="format-select">
      <label for="format-select">Format pr√©d√©fini:</label>
      <select id="format-select" class="select-input" (change)="onFormatChange($event)">
        <option value="">-- Choisir un format --</option>
        <option value="tdrive">T-Drive (taxi_id, lat, lon, timestamp)</option>
        <option value="csv">CSV standard (latitude, longitude, timestamp)</option>
        <option value="custom">Format personnalis√©</option>
      </select>
    </div>

    <!-- Configuration personnalis√©e -->
    @if (showCustomFormat()) {
      <div class="custom-format">
        <p class="info-text">Indiquez l'ordre des colonnes dans votre fichier:</p>
        
        <div class="column-config">
          @for (column of columns(); track column.id) {
            <div class="column-item">
              <div class="column-header">
                <label for="col-{{ column.id }}">Colonne {{ $index + 1 }}:</label>
                @if (columns().length > 1) {
                  <button 
                    type="button" 
                    class="btn-remove"
                    (click)="removeColumn(column.id)"
                    title="Supprimer cette colonne"
                  >
                    ‚úï
                  </button>
                }
              </div>
              <select 
                id="col-{{ column.id }}" 
                class="select-input"
                [value]="column.value"
                (change)="updateColumn(column.id, $any($event.target).value)"   
                >
                <option value="">S√©lectionner</option>
                <option value="taxi_id">ID Taxi</option>
                <option value="latitude">Latitude</option>
                <option value="longitude">Longitude</option>
                <option value="timestamp">Timestamp</option>
                <option value="speed">Vitesse</option>
                <option value="direction">Direction</option>
                <option value="ignore">Ignorer</option>
              </select>
            </div>
          }
        </div>

        <!-- Bouton pour ajouter une colonne -->
        <div class="column-actions">
          <button 
            type="button" 
            class="btn-add-column"
            (click)="addColumn()"
          >
            ‚ûï Ajouter une colonne
          </button>
        </div>

        <!-- Options suppl√©mentaires -->
        <div class="options">
          <label>
            <input type="checkbox" id="has-header">
            La premi√®re ligne est une en-t√™te
          </label>
          
          <label for="separator">S√©parateur de colonnes:</label>
          <select id="separator" class="select-input">
            <option value=",">Virgule (,)</option>
            <option value=";">Point-virgule (;)</option>
            <option value="\t">Tabulation</option>
            <option value=" ">Espace</option>
          </select>
        </div>
      </div>
    }

    <!-- Aper√ßu du format s√©lectionn√© -->
    <div class="format-preview">
      <h3>Aper√ßu:</h3>
      <p>{{ getFormatPreview() }}</p>
    </div>
  </section>

  <!-- Section 3: M√©tadonn√©es -->
  <section class="upload-section">
    <h2>3. Informations sur le dataset</h2>
    
    <div class="form-group">
      <label for="dataset-name">Nom du dataset:</label>
      <input 
        type="text" 
        id="dataset-name"
        placeholder="Ex: Taxi Beijing 2020"
        class="text-input"
      >
    </div>

    <div class="form-group">
      <label for="dataset-description">Description:</label>
      <textarea 
        id="dataset-description"
        placeholder="D√©crivez vos donn√©es..."
        class="textarea-input"
      ></textarea>
    </div>

    <div class="form-group">
      <label for="geo-location">Zone g√©ographique (optionnel):</label>
      <input 
        type="text" 
        id="geo-location"
        placeholder="Ex: Beijing, China"
        class="text-input"
      >
    </div>
  </section>

  <!-- Section 4: Validation -->
  <section class="upload-section">
    <h2>4. Valider et importer</h2>
    
    <div class="validation-checklist">
      <div class="check-item">
        <input type="checkbox" id="check-file" disabled>
        <label for="check-file">Fichier s√©lectionn√© ‚úÖ</label>
      </div>
      <div class="check-item">
        <input type="checkbox" id="check-format" disabled>
        <label for="check-format">Format d√©fini ‚úÖ</label>
      </div>
      <div class="check-item">
        <input type="checkbox" id="check-metadata" disabled>
        <label for="check-metadata">M√©tadonn√©es compl√®tes ‚úÖ</label>
      </div>
    </div>

    <div class="action-buttons">
      <button class="btn-secondary">
        Annuler
      </button>
      <button class="btn-primary" disabled>
        Importer les donn√©es
      </button>
    </div>
  </section>

  <!-- Barre de progression -->
  <div class="progress-section">
    <h3>Import en cours...</h3>
    <div class="progress-bar">
      <div class="progress-fill" style="width: 0%"></div>
    </div>
    <p>0%</p>
  </div>

  <!-- Message de succ√®s/erreur -->
  <div class="alert alert-success">
    Import r√©ussi! üéâ
  </div>
</div>